chapter 1 - ä»€ä¹ˆæ˜¯DIï¼ˆä¾èµ–æ³¨å…¥ï¼‰

å›å¿†ï¼šä¹‹å‰é™äº† IOCå®¹å™¨  å’Œ  æ§åˆ¶åè½¬
ç°åœ¨åœ¨è¿™ä¸ªåŸºç¡€ä¸Šè®²ï¼šDI  ä¾èµ–æ³¨å…¥

å¦‚æœ må¯¹è±¡ ä¾èµ–äº nå¯¹è±¡ï¼Œspring IOC åœ¨ç®¡ç† må¯¹è±¡æ—¶ä¹ŸæŠŠ nå¯¹è±¡ç»™æ³¨å…¥è¿›å»



chapter 2 - ä¾èµ–æ³¨å…¥ï¼ˆä¸Šï¼‰

public class Cat {
    private String name;

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }
}

public class User {
    private String name;
    private int age;
    private Cat cat;

    public User() {}

    public void setName(String name) { this.name = name; }

    public String getName() { return name; }

    public void setAge(int age) { this.age = age; }

    public int getAge() { return age; }

    public void setCat(Cat cat) {
        this.cat = cat;
    }

    public Cat getCat() {
        return cat;
    }
}

<bean id="user" class="com.ithuangqing.bean.User"/>
<bean id="cat" class="com.ithuangqing.bean.Cat"/>

ApplicationContext applicationContext = new ClassPathXmlApplicationContext("applicationContext.xml");

Cat cat = (Cat) applicationContext.getBean("cat");
cat.setName("å°æ¯›çš®");

User user = (User) applicationContext.getBean("user");
user.setName("zhangsan");
user.setAge(25);
user.setCat(cat);


ä¸‹é¢é€šè¿‡ spring ä¸­çš„ ä¾èµ–æ³¨å…¥ çš„æ–¹å¼å»åšï¼š

<bean id="user" class="com.ithuangqing.bean.User"/>      ï¼ˆè‡ªå·±åŠ /æ‚Ÿï¼šè¿™é‡Œåœ¨å®ä¾‹åŒ–çš„æ—¶å€™æ˜¯è°ƒç”¨äº†æ— å‚æ„é€ ï¼ˆæ‰€ä»¥è¿™é‡Œ userå®ä¾‹ åˆ›å»ºå®Œåï¼Œfiledä¼šæ˜¯â€é›¶å‡ç©ºâ€œï¼‰ï¼›å¦‚æœ User class ä¸­æ²¡æœ‰æ— å‚æ„é€ ï¼Œè¿™é‡Œå°±ä¼šæŠ¥é”™ï¼›å¦‚æœæ²¡æœ‰å®šä¹‰ä»»ä½•æ„é€ å‡½æ•°ï¼Œè¿™é‡Œä¸ä¼šæŠ¥é”™ï¼Œå› ä¸º java ä¼šé»˜è®¤åŠ ä¸€ä¸ªæ— å‚æ„é€ ï¼‰

<bean id="cat" class="com.ithuangqing.bean.Cat">
    <property name="name" value="å°æ¯›çš®"/>              è¿™é‡Œå°±ç›¸å½“äºç»™ cat é‡Œé¢çš„ name å±æ€§èµ‹å€¼äº†ï¼›å¦‚æœ Cat ç±»ä¸­æ²¡æœ‰ setName å‡½æ•°ï¼Œè¿™é‡Œè¿™æ ·åšå°±æ˜¯ä¸è¡Œçš„ğŸ™…ï¼ˆè‡ªæ‚Ÿï¼šè¿™é‡Œå…¶å®å°±æ˜¯è°ƒç”¨äº†å¯¹åº” property çš„ setterï¼‰
</bean>



chapter 3 - ä¾èµ–æ³¨å…¥ï¼ˆä¸‹ï¼‰

<bean id="user" class="com.ithuangqing.bean.User">
    <property name="name" value="å¼ ä¸‰"/>               èƒ½é€šè¿‡è¿™ç§æ–¹å¼æ³¨å…¥æ˜¯å› ä¸ºåœ¨ Userç±»ä¸­æä¾›äº† setter 
    <property name="age" value="25"/>
</bean>

<bean id="cat" class="com.ithuangqing.bean.Cat">
    <property name="name" value="å¤§æ¯›çš®"/>              è¿™é‡Œå°±ç›¸å½“äºç»™ cat é‡Œé¢çš„ name å±æ€§èµ‹å€¼äº†ï¼›å¦‚æœ Cat ç±»ä¸­æ²¡æœ‰ setName å‡½æ•°ï¼Œè¿™é‡Œè¿™æ ·åšå°±æ˜¯ä¸è¡Œçš„ğŸ™…ï¼ˆè‡ªæ‚Ÿï¼šè¿™é‡Œå…¶å®å°±æ˜¯è°ƒç”¨äº†å¯¹åº” property çš„ setterï¼‰
</bean>

ä»¥ä¸Šæ˜¯é€šè¿‡ setter çš„æ–¹æ³•è¿›è¡Œæ„é€ 


è¿˜æœ‰é€šè¿‡ æ„é€ å™¨ï¼ˆconstructorï¼‰çš„æ–¹æ³•è¿›è¡Œæ„é€  [æ„é€ å™¨æ³¨å…¥]

public Class User {
    private String name;
    private int age;
    private Cat cat;

    public User(String name, int age) {
        this.name = name;
        this.age = age;
    }
}

è¿™æ—¶ï¼Œå¦‚æœè¿™æ ·å†™ï¼Œå°±ä¼šæŠ¥é”™: No matching constructor found in class 'User'

<bean id="user" class="com.ithuangqing.bean.User">
    <property name="name" value="å¼ ä¸‰"/>               èƒ½é€šè¿‡è¿™ç§æ–¹å¼æ³¨å…¥æ˜¯å› ä¸ºåœ¨ Userç±»ä¸­æä¾›äº† setter 
    <property name="age" value="25"/>
</bean>

åŸå› æ˜¯ï¼ŒUser class ä¸­æ²¡æœ‰ æ— å‚æ„é€ äº†

éœ€è¦æ”¹æˆå¦‚ä¸‹ï¼š

<bean id="user" class="com.ithuangqing.bean.User">
    <constructor-arg name="name" value="æå››"/>
    <constructor-arg name="age" value="22"/>        æ³¨æ„è¿™é‡Œ age è™½ç„¶æ˜¯ int ç±»å‹ï¼Œä½†æ˜¯ä¹ŸåŠ äº† å¼•å·
    <property name="cat" ref="cat"/>                æ­£å¦‚ä¹‹å‰ï¼Œå¦‚æœä½ æ³¨å…¥çš„æ˜¯ä¸€ä¸ªå±æ€§ï¼Œå°±ç”¨ valueï¼›ä½†æ˜¯è¿™é‡Œæ³¨å…¥çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæ³¨å…¥å¯¹è±¡ç”¨ ref        è¿™é‡Œçš„çŸ¥è¯†ç‚¹å°±æ˜¯ï¼šå¯¹è±¡æ³¨å…¥ï¼ï¼ï¼
</bean>

<bean id="cat" class="com.ithuangqing.bean.Cat">
    <property name="name" value="å¤§æ¯›çš®"/>            è¿™é‡Œä¸ä¸Šé¢ä¸€æ ·
</bean>

ApplicationContext applicationContext = new ClassPathXmlApplicationContext("applicationContext.xml");

Cat cat = (Cat) applicationContext.getBean("cat");
User user = (User) applicationContext.getBean("user");              // User{name='æå››', age=22, cat=Cat{name='å¤§æ¯›çš®'}}



chapter 4 - ä¾èµ–æ³¨å…¥å°ç»“

<bean id="user" class="com.ithuangqing.bean.User">
    <constructor-arg name="name" value="æå››"/>      é€šè¿‡æ„é€ å™¨çš„ å±æ€§æ³¨å…¥
    <constructor-arg name="age" value="22"/>            
    <property name="cat" ref="cat"/>                æ³¨æ„ï¼šref ç”¨äºå¯¹è±¡æ³¨å…¥ï¼ï¼ï¼     è¿™é‡Œçš„çŸ¥è¯†ç‚¹å°±æ˜¯ï¼šå¯¹è±¡æ³¨å…¥ï¼ï¼ï¼
</bean>

<bean id="cat" class="com.ithuangqing.bean.Cat">
    <property name="name" value="å¤§æ¯›çš®"/>            é€šè¿‡ setterçš„ å±æ€§æ³¨å…¥         æ³¨æ„ï¼šè¿™é‡Œç”¨çš„æ˜¯ valueï¼Œä¸æ˜¯ ref
</bean>



chapter 5 - ç‰¹æ®Šå­—ç¬¦çš„å±æ€§æ³¨å…¥

<bean id="cat" class="com.ithuangqing.bean.Cat">
    <property name="name">
        <value>æ¯›çš®</value>             è¿™ç§å†™æ³•ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯ å¯¹äºæˆ‘ä»¬è¿™ä¸ªä¾‹å­ IDE ä¼šæ¨èä½¿ç”¨ä¸Šé¢çš„ğŸ‘†å†™æ³•ï¼ˆæç¤ºè¯­ï¼šReplace <value> with "value" attributeï¼‰
    </property>
</bean>

ä½†æ˜¯å½“æœ‰ç‰¹æ®Šå€¼æ—¶å°±å¿…é¡»ä½¿ç”¨è¿™ç§å†™æ³•äº†ï¼Œä¾‹å¦‚æˆ‘æƒ³è®© name çš„å€¼æ˜¯ï¼š <æ¯›çš®>

<bean id="cat" class="com.ithuangqing.bean.Cat">
    <property name="name" value="<æ¯›çš®>"/>            è¿™ç§å†™æ³•ä¸è¡ŒğŸ™…â€â™‚ï¸
</bean>

<bean id="cat" class="com.ithuangqing.bean.Cat">
    <property name="name">
        <value><æ¯›çš®></value>             è¿™ç§å†™æ³•ä¹Ÿä¸è¡ŒğŸ™…
    </property>
</bean>

éœ€è¦è¿™æ ·å†™ï¼š

<bean id="cat" class="com.ithuangqing.bean.Cat">
    <property name="name">
        <value><![CDATA[<æ¯›çš®>]]></value>
    </property>
</bean>

Cat cat = (Cat) applicationContext.getBean('cat');      // Cat{name='<æ¯›çš®>'}

<![CDATA[  (ç‰¹æ®Šå­—ç¬¦æ”¾åœ¨è¿™ä¸ªé‡Œé¢)  ]]>



chapter 6 - På‘½åç©ºé—´æ³¨å…¥

ç”¨ pæ ‡ç­¾ - è¿™é‡Œè¦ç”¨å•æ ‡ç­¾

ä¼šå¤šä¸€ä¸ª xmlns:p="http://www.springframework.org/schema/p"   å¤šäº†ä¸€ä¸ªè¿™ä¸ª pæ ‡ç­¾ å‘½åç©ºé—´ï¼Œå¯ä»¥ç”¨è¿™ä¸ª pæ ‡ç­¾äº†

<bean id="cat" class="com.ithuangqing.bean.Cat" p:name="påç§°å‘½åç©ºé—´æ³¨å…¥"/>       è¿™ç§ pæ ‡ç­¾ çš„æ–¹å¼ å’Œ <property> ä¸€æ ·ï¼Œæœ¬è´¨éƒ½æ˜¯è°ƒç”¨ setteræ–¹æ³•

Cat cat = (Cat) applicationContext.getBean('cat');      // Cat{name='påç§°å‘½åç©ºé—´æ³¨å…¥'}


<bean id="user1" class="com.ithuangqing.bean.User" 
      p:name="å¼ ä¸‰" p:age="22" p:cat-ref="cat"/>
è¿™æ—¶å€™ config file ä¸­è¿˜ä¼šæŠ¥é”™ï¼šNo matching constructor found in class 'User'
è¿™æ˜¯å› ä¸ºç›®å‰æˆ‘ä»¬çš„ User class æœ‰ä¸€ä¸ª constructor
public User(String name, int age) {
    this.name = name;
    this.age = age;
}
å½“æˆ‘ä»¬æŠŠè¿™ä¸ªå”¯ä¸€çš„ constructor æ³¨é‡Šæ‰ä¹‹åï¼Œå°±ä¸æŠ¥é”™äº†
è¿™é‡Œä¸ºä»€ä¹ˆå¯ä»¥ç”¨ pæ ‡ç­¾ï¼Œå…¶åŸå› è¿˜æ˜¯ åœ¨ User class ä¸­æˆ‘ä»¬æœ‰ setter 
pæ ‡ç­¾çš„åº•å±‚ è¿˜æ˜¯ç”¨äº† setter æ³¨å…¥çš„æ–¹å¼
ä¸‹é¢å°±æ˜¯éªŒè¯ğŸ‘‡
å¦‚æœæˆ‘ä»¬æŠŠ setCat æ³¨é‡Šæ‰ï¼Œå°±ä¼šæŠ¥å¦‚ä¸‹é”™è¯¯:
Attribute p:cat-ref is not allowed here  
IDE ä¼šæç¤ºæˆ‘ä»¬ Create Method 'setCat' in 'User' 



chapter 7 - Listé›†åˆå±æ€§æ³¨å…¥

public class User {
    private String name;
    private int age;
    private Cat cat;
    private List<String> stringList;           // ç°åœ¨å¤šåŠ äº†ä¸€ä¸ªè¿™ä¸ª field

    public void setStringList(List<String> stringList) {
        this.stringList = stringList;
    }
}

è¿™èŠ‚è¯¾æ˜¯æƒ³è®²ï¼šå¦‚ä½•æŠŠè¿™ä¸ª list é›†åˆæ³¨å…¥è¿›å»

<bean id="user1" class="com.ithuangqing.bean.User" 
      p:name="å¼ ä¸‰" p:age="22" p:cat-ref="cat">
    
    <property name="stringList">
        <list>
            <value>"hello"</value>
            <value>sss</value>          å› ä¸ºè¿™æ˜¯ä¸€ä¸ª List<String> å®ƒé»˜è®¤é‡Œè¾¹æ”¾çš„å°±æ˜¯å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥ä¸ç”¨åŠ  ""
        </list>
    </property>
</bean>

ä¹‹å‰ï¼Œå¦‚æœæ³¨å…¥çš„æ˜¯æ™®é€šå˜é‡ æˆ– æ™®é€šå¯¹è±¡ éƒ½æ˜¯ç”¨çš„ å•æ ‡ç­¾ï¼Œä½†æ˜¯è¿™é‡Œæƒ³æ³¨å…¥ listï¼Œæ‰€ä»¥éœ€è¦ä¸Šé¢ğŸ‘†è¿™ä¹ˆåš

User user = (User) applicationContext.getBean("user1");      // User{name='å¼ ä¸‰', age=22, cat=Cat{name='påç§°å‘½åç©ºé—´'}, stringList=["hello", sss]}
âš ï¸ æ³¨æ„ï¼šä¸Šé¢çš„ helloæœ‰åŒå¼•å·ï¼Œä½†æ˜¯ sss æ²¡æœ‰


å¦‚æœå¾€ list é‡Œé¢æ·»åŠ ä¸€ä¸ª cat å¯¹è±¡ï¼Œä¼šæŠ¥é”™: Bean must be of 'java.lang.String' type

<bean id="user1" class="com.ithuangqing.bean.User" 
      p:name="å¼ ä¸‰" p:age="22" p:cat-ref="cat">
    
    <property name="stringList">
        <list>
            <value>"hello"</value>
            <value>sss</value>          å› ä¸ºè¿™æ˜¯ä¸€ä¸ª List<String> å®ƒé»˜è®¤é‡Œè¾¹æ”¾çš„å°±æ˜¯å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥ä¸ç”¨åŠ  ""
            <ref bean="cat"></ref>      è¿™ä¸€è¡Œä¼šæŠ¥é”™ï¼šBean must be of 'java.lang.String' type    --> è¿™æ˜¯åœ¨è¯´ï¼Œè¿™é‡Œæ·»åŠ çš„ bean å¿…é¡»æ˜¯ string ç±»å‹
        </list>
    </property>
</bean>


å¦‚æœæŠŠ List çš„æ³›å‹å»æ‰ï¼Œå°±ä¸æŠ¥é”™äº†

public class User {
    private String name;
    private int age;
    private Cat cat;
    private List stringList;           // ç°åœ¨å¤šåŠ äº†ä¸€ä¸ªè¿™ä¸ª field

    public void setStringList(List stringList) {
        this.stringList = stringList;
    }
}

è¿™æ˜¯ä¸Šé¢çš„é…ç½®å°±ä¸æŠ¥é”™äº†ï¼Œä½†æ˜¯ IDE ä¼šæç¤º æŠŠ
<ref bean="cat"></ref>
æ”¹æˆ
<ref bean="cat"/>
å› ä¸º XML tag has empty body ï¼ˆè¿™æ˜¯æç¤ºè¯­ï¼‰

<bean id="user1" class="com.ithuangqing.bean.User" 
      p:name="å¼ ä¸‰" p:age="22" p:cat-ref="cat">
    
    <property name="stringList">
        <list>
            <value>"hello"</value>
            <value>sss</value>          
            <ref bean="cat"/>           åªæœ‰è¿™è¡Œä¸ä¸Šé¢ä¸åŒ
        </list>
    </property>
</bean>

User user = (User) applicationContext.getBean("user1");      // User{name='å¼ ä¸‰', age=22, cat=Cat{name='påç§°å‘½åç©ºé—´'}, stringList=["hello", sss, Cat{name='påç§°å‘½åç©ºé—´æ³¨å…¥'}]}



chapter 8 - Mapé›†åˆå±æ€§æ³¨å…¥

è¿™èŠ‚è¯¾ï¼šå…³äºæ˜ å°„å…³ç³»ï¼ˆMap ç±»å‹ï¼‰çš„æ³¨å…¥

public class User {
    private String name;
    private int age;
    private Cat cat;
    private List stringList;
    private Map map;                 // è¿™é‡ŒåŠ äº†ä¸€ä¸ª Map å±æ€§

    public void setMap(Map map) {
        this.map = map;
    }
}

<bean id="user1" class="com.ithuangqing.bean.User" 
      p:name="å¼ ä¸‰" p:age="22" p:cat-ref="cat">              æ³¨æ„è¿™é‡Œçš„ cat-refï¼ï¼
    
    <property name="stringList">
        <list>
            <value>"hello"</value>
            <value>sss</value>          
            <ref bean="cat"/>           åªæœ‰è¿™è¡Œä¸ä¸Šé¢ä¸åŒ
        </list>
    </property>

    <property name="map">
        <map>
            <entry key="1" value="1"></entry>        æ¯ä¸€ä¸ª entry å°±æ˜¯ä¸€ä¸ªé”®å€¼å¯¹     åŒæ ·ï¼Œè¿™é‡Œä¼šæç¤ºæ”¹æˆä¸‹é¢çš„å½¢å¼ ğŸ‘‡
            <entry key="2" value="2"/>
            <entry key="3" value-ref="cat"/>         entry ä¸­æ³¨å…¥å¯¹è±¡
        </map>
    </property>
</bean>

User user = (User) applicationContext.getBean("user1");      

// User{name='å¼ ä¸‰', age=22, cat=Cat{name='påç§°å‘½åç©ºé—´'}, stringList=["hello", sss, Cat{name='påç§°å‘½åç©ºé—´æ³¨å…¥'}], map={1=1, 2=2, 3=Cat{name='påç§°å‘½åç©ºé—´æ³¨å…¥'}}}






